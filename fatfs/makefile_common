TARGET	:= ../libfatfs$(MSUFFIX).a
OBJECTS	:= ff.o ff_utf8.o option/ccsbcs.o
SRCDIR  := ../src/

VPATH = $(SRCDIR)

.PHONY : all clean

all: $(TARGET)

-include $(OBJECTS:.o=.d)

$(TARGET): $(OBJECTS)
	@echo  "AR	$@"
	@$(AR) $(ARFLAGS) $@ $^

option/ccsbcs.o: ../src/option/ccsbcs.c
%.o:%.c
	@mkdir -p $(dir $@)
	@echo  "CC	$@"
	@$(CC) $(CFLAGS) -c -MMD -MP -MF $(@:.o=.d) -o $@ $<

clean:
	-rm -rf $(TARGET) $(OBJECTS) $(OBJECTS:.o=.d) option
